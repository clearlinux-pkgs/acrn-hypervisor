From 017c7440431ceba7db32f268089ad4a1ea7e1c4a Mon Sep 17 00:00:00 2001
From: Alek Du <alek.du@intel.com>
Date: Fri, 7 Dec 2018 09:18:42 +0000
Subject: [PATCH] add install debug target

Rebased according to 2018ww49.5 acrn release.

Signed-off-by: Alek Du <alek.du@intel.com>
---
 hypervisor/Makefile | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/hypervisor/Makefile b/hypervisor/Makefile
index bc68c15..989cf85 100644
--- a/hypervisor/Makefile
+++ b/hypervisor/Makefile
@@ -282,11 +282,19 @@ efi: $(HV_OBJDIR)/$(HV_FILE).bin
 
 install: efi
 	make -C bsp/uefi/efi HV_OBJDIR=$(HV_OBJDIR) install
+
+install-debug: $(HV_OBJDIR)/$(HV_FILE).map $(HV_OBJDIR)/$(HV_FILE).out
+	install -D $(HV_OBJDIR)/$(HV_FILE).out $(DESTDIR)/usr/lib/acrn/$(HV_FILE).efi.out
+	install -D $(HV_OBJDIR)/$(HV_FILE).map $(DESTDIR)/usr/lib/acrn/$(HV_FILE).efi.map
 endif
 
 ifeq ($(CONFIG_PLATFORM_SBL),y)
 install: $(HV_OBJDIR)/$(HV_FILE).32.out
 	install -D $(HV_OBJDIR)/$(HV_FILE).32.out $(DESTDIR)/usr/lib/acrn/$(HV_FILE).sbl
+
+install-debug: $(HV_OBJDIR)/$(HV_FILE).map $(HV_OBJDIR)/$(HV_FILE).out
+	install -D $(HV_OBJDIR)/$(HV_FILE).out $(DESTDIR)/usr/lib/acrn/$(HV_FILE).sbl.out
+	install -D $(HV_OBJDIR)/$(HV_FILE).map $(DESTDIR)/usr/lib/acrn/$(HV_FILE).sbl.map
 endif
 
 .PHONY: header
-- 
2.19.1

